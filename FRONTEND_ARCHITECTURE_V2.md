# 前端架构重构说明

## 🎯 重构目标

1. ✅ 移除知识库管理功能（用户无需提交知识库）
2. ✅ 支持上传简历 + 辅助材料进行面试
3. ✅ 预设面试类型（后端面试、校招、考研复试等）
4. ✅ DIY面试官功能（自定义面试官风格）

---

## 📁 新页面结构

```
frontend/src/pages/
├── Home.tsx              # 首页 - 选择面试类型/DIY面试官
├── InterviewSetup.tsx    # 面试准备 - 上传简历+辅助材料
├── Interview.tsx         # 面试对话页面（保持原有）
├── Report.tsx           # 面试报告页面（保持原有）
└── DIYInterviewer.tsx   # DIY面试官配置页面（新增）
```

---

## 🎨 新架构流程

```
┌─────────────────────────────────────────────────────────────┐
│                         首页 (Home)                          │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │ 后端开发面试 │ │ 校招面试    │ │ 考研复试    │ ...        │
│  │  (预设)     │ │  (预设)     │ │  (预设)     │            │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│                                                              │
│                    ┌──────────────┐                         │
│                    │ DIY面试官   │                         │
│                    │  (自定义)   │                         │
│                    └──────────────┘                         │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   面试准备 (InterviewSetup)                  │
│                                                              │
│  步骤1: 上传简历                                              │
│  ┌──────────────────────────────────────┐                   │
│  │ 拖拽或点击上传PDF/DOCX/TXT            │                   │
│  │ 文件大小限制: 10MB                    │                   │
│  └──────────────────────────────────────┘                   │
│                                                              │
│  步骤2: 上传辅助材料（可选）                                   │
│  ┌──────────────────────────────────────┐                   │
│  │ 项目文档、技术博客、论文等            │                   │
│  │ 最多3个文件，单个不超过50MB          │                   │
│  └──────────────────────────────────────┘                   │
│                                                              │
│  步骤3: 确认信息                                              │
│  │ - 面试类型                            │                   │
│  │ - 简历解析结果                        │                   │
│  │ - 辅助材料列表                        │                   │
│  └──────────────────────────────────────┘                   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    智能面试 (Interview)                      │
│  （原有功能，保持不变）                                        │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   面试报告 (Report)                          │
│  （原有功能，保持不变）                                        │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎨 DIY面试官功能

### 可配置项：

1. **基本设置**
   - 面试官名称（如"考研复试面试官"）
   - 面试风格（严格/标准/友好）
   - 关注领域（基础知识、项目经验、算法等）
   - 面试时长（15-90分钟）

2. **题库选择**
   - Go语言
   - Java
   - Python
   - MySQL
   - Redis
   - 计算机网络
   - 操作系统
   - 算法
   - 系统设计
   - 计算机基础

3. **高级配置**
   - 最大追问次数（0-15次）
   - 自定义系统提示词（可选）

---

## 📝 预设面试类型

### 1. 后端开发面试
- **时长**: 45分钟
- **风格**: 标准
- **题库**: Go, Java, MySQL, Redis, 系统设计
- **重点**: Go语言、MySQL、Redis、系统设计

### 2. Go后端专项
- **时长**: 40分钟
- **风格**: 严格
- **题库**: Go, MySQL, Redis
- **重点**: Go语言核心、GMP调度、GC机制

### 3. Java后端专项
- **时长**: 45分钟
- **风格**: 标准
- **题库**: Java, Spring, MySQL, Redis
- **重点**: Java核心、Spring、JVM

### 4. 考研复试面试
- **时长**: 30分钟
- **风格**: 友好
- **题库**: 计算机基础、算法、项目
- **重点**: 计算机基础、算法、项目经历

### 5. 校招面试
- **时长**: 35分钟
- **风格**: 友好
- **题库**: 计算机基础、算法
- **重点**: 基础概念、算法、学习能力

---

## 🔧 全局状态管理

### 新增状态：

```typescript
interface AppState {
  // 导航
  currentPage: 'home' | 'setup' | 'interview' | 'report' | 'diy'
  
  // 面试类型选择
  selectedInterviewType: InterviewType | null
  
  // DIY配置
  diyConfig: DIYInterviewerConfig | null
  
  // 简历和材料
  resumeData: any | null
  supportingMaterials: File[]
  
  // 面试会话（原有）
  sessionId: string | null
  interviewData: any | null
}
```

### InterviewType 结构：

```typescript
interface InterviewType {
  id: string
  name: string
  description: string
  icon: string
  knowledgeBase: string[]  // 题库ID列表
  style: 'strict' | 'standard' | 'friendly'
  duration: number
  focusAreas: string[]
}
```

### DIYInterviewerConfig 结构：

```typescript
interface DIYInterviewerConfig {
  name: string
  style: 'strict' | 'standard' | 'friendly'
  focusAreas: string[]
  knowledgeBase: string[]
  duration: number
  maxFollowups: number
  customPrompt?: string  // 自定义提示词
}
```

---

## 📊 辅助材料功能

### 支持的文件类型：
- PDF (.pdf)
- Word文档 (.docx, .doc)
- 文本文件 (.txt)
- 图片 (.png, .jpg, .jpeg)

### 限制：
- 最多上传 3 个文件
- 单个文件不超过 50MB
- 可选上传

### 用途：
- 项目文档
- 技术博客/文章
- 学术论文
- 项目截图/设计图

---

## 🚀 使用流程

### 场景1：使用预设面试
1. 进入首页
2. 选择"后端开发面试"等预设类型
3. 上传简历（必需）
4. 上传辅助材料（可选）
5. 确认信息
6. 开始面试

### 场景2：DIY面试官（考研复试）
1. 进入首页
2. 点击"DIY面试官"
3. 配置面试参数：
   - 名称：考研复试
   - 风格：友好
   - 题库：计算机基础、算法
   - 时长：30分钟
4. 保存配置
5. 进入面试准备流程

---

## 🎨 UI设计特点

1. **首页**
   - 卡片式布局展示预设面试类型
   - 特殊样式突出DIY面试官入口
   - 悬停动效提升交互体验

2. **面试准备页**
   - 三步流程（简历→材料→确认）
   - 拖拽上传区域
   - 文件列表管理
   - 信息确认预览

3. **DIY配置页**
   - 分步表单（基本→题库→高级）
   - 题库选择卡片网格
   - 滑块控制数值
   - 实时保存提示

4. **底部导航**
   - 固定底部导航栏
   - 首页 / DIY面试官 快速切换

---

## 📦 依赖更新

新增依赖：
```json
{
  "react-dropzone": "^14.x"  // 拖拽上传
}
```

---

## ✅ 功能检查清单

- [x] 首页显示预设面试类型
- [x] DIY面试官入口
- [x] 简历上传（拖拽+点击）
- [x] 辅助材料上传（多文件）
- [x] 三步面试准备流程
- [x] DIY面试官三步配置
- [x] 题库选择功能
- [x] 面试风格选择
- [x] 关注领域选择
- [x] 时长和追问次数滑块
- [x] 自定义提示词
- [x] 配置保存功能
- [x] 状态管理更新
- [x] 页面导航流畅

---

## 🎯 下一步建议

1. **后端API对接**
   - 简历解析API
   - 辅助材料上传API
   - DIY面试官配置保存API
   - 面试流程API

2. **功能增强**
   - 面试历史记录
   - DIY配置模板保存
   - 面试官分享功能

3. **UI优化**
   - 加载动画
   - 过渡效果
   - 响应式适配

---

**重构完成！新前端架构支持更灵活多样的面试场景。**
